<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('partials/header') %>
    <link id="theme-stylesheet" rel="stylesheet" href="/css/home.css">
  </head>
  <body>
    <%- include('partials/navbar') %>

    <div id="drawerOverlay" class="drawer-overlay" hidden></div>
    <aside id="appDrawer" class="drawer" aria-hidden="true">
      <nav class="drawer-nav" aria-label="Menu Utama">
        <div class="drawer-logo" style="display: flex; flex-direction: column; align-items: center; gap: 0.8rem; margin-bottom: 1.5rem; margin-top: 0.2rem;">
          <img src="/icons/adaweb_icon.png" alt="ADAWEB Logo" style="width: 120px; height: 120px; object-fit: contain;" />
          <div style="color: #fff; font-weight: 700; font-size: 1.22rem; letter-spacing: 0.04em; text-align: center;">B5 - ADAWEB</div>
        </div>
        <div class="drawer-plugins">
          <%- typeof navSidebarContent !== 'undefined' ? navSidebarContent : '' %>
        </div>
      </nav>
    </aside>

    <div id="appContent" class="app-content">
      <div class="container">
        <main class="content">
  <%- body %>
  <%- typeof mainContent !== 'undefined' ? mainContent : '' %>
        </main>

        <aside class="sidebar">
          <%- typeof sidebarContent !== 'undefined' ? sidebarContent : '' %>
        </aside>
      </div>
    </div>

    <script>
      (function () {
        const btn = document.getElementById('sidebarToggle');
        const drawer = document.getElementById('appDrawer');
        const overlay = document.getElementById('drawerOverlay');
        if (!btn || !drawer || !overlay) return;
        function openDrawer() {
          drawer.classList.add('open');
          drawer.setAttribute('aria-hidden', 'false');
          overlay.hidden = false;
          btn.setAttribute('aria-expanded', 'true');
          const app = document.getElementById('appContent');
          if (app) app.style.overflow = 'hidden';
          document.body.classList.add('drawer-open');
        }
        function closeDrawer() {
          drawer.classList.remove('open');
          drawer.setAttribute('aria-hidden', 'true');
          overlay.hidden = true;
          btn.setAttribute('aria-expanded', 'false');
          const app = document.getElementById('appContent');
          if (app) app.style.overflow = '';
          document.body.classList.remove('drawer-open');
        }
        btn.addEventListener('click', () => {
          if (drawer.classList.contains('open')) closeDrawer(); else openDrawer();
        });
        overlay.addEventListener('click', closeDrawer);
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeDrawer(); });
      })();
    </script>

    <script src="/js/themeToggle.js"></script>
    <script src="/js/toast.js"></script>
    <script src="/js/socialFeed.js"></script>
  </body>
</html>